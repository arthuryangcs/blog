---
title: vim实用技巧（二）-缓冲区、窗口和标签页
date: 2016-12-13 19:16:26
tags:
  - vim
  - 技巧
categories: Vim
---

Vim 允许我们同时在多个文件上工作。为了实现此目的，Vim 提供了缓冲区，记录一次编辑回话打开的所有文件。当我们需要同时查看多个文件时，可将工作区划分为多个窗口。还可以用标签页管理分割的窗口。

<!-- more -->

## 缓冲区

在一次编辑会话中，可以打开多个文件。用 Vim 的缓冲区列表可以对这些文件进行管理。

### 打开缓冲区

我们可以在运行 Vim 的时候通过传入多个文件来打开多个文件。

``` shell
vim *.txt
```

这样就会打开路径下所有以 txt 为后缀的文件。同样，在 Vim 中，我们也可以通过 `:e <file_name>`  命令打开新的文件。

### 显示缓冲区列表

``` shell
:ls
```

最前面的数字为缓冲区编号，编号不一定是连续的，尤其是当你删除了某个缓冲区后。

### 删除缓冲区

``` shell
:bd <buff_number>
```

其中 &lt;buff_number&gt; 为缓冲区编号。

### 改变当前缓冲区

操作 | 用途
-- | -- 
:bp[rev] | 跳到前一个缓冲区
:bn[ext] | 跳到后一个缓冲区
:bf[irst] | 跳到第一个缓冲区
:bl[ast] | 跳到最后一个缓冲区
:b &lt;buff_number&gt; | 跳到编号为 &lt;buff_number&gt; 的缓冲区

## 窗口

Vim 允许我们将工作区切分成多个窗口， 在这些窗口中显示多个缓冲区。

### 创建分割窗口

操作 | 用途
-- | -- 
&lt;C-w&gt;s | 水平切分当前选中窗口
&lt;C-w&gt;v | 垂直切分当前选中窗口

切分完后，两个窗口默认显示当前缓冲区的内容。此时，我们可以通过之前提到的 `:e <file_name>` 命令打开新的文件，或通过缓冲区选择命令选择其他缓冲区。

我们还可以一步到位，创建一个窗口并打开文件：

操作 | 用途
-- | -- 
:sp[lit] <file_name>  | 水平切分当前选中窗口，并打开文件
:vsp[lit] <file_name> | 垂直切分当前选中窗口，并打开文件

### 在窗口间切换

操作 | 用途
-- | -- 
&lt;C-w&gt;w | 在窗口间循环切换
&lt;C-w&gt;h | 切换到左边窗口
&lt;C-w&gt;l | 切换到右边窗口
&lt;C-w&gt;j | 切换到下边窗口
&lt;C-w&gt;k | 切换到上边窗口

其实就是 `<C-w>` 加上 `hjkl` 方向键。

`<C-w>w` 命令的一个比较好操作的手法就是一直按着 `<Ctrl>` 键，然后按两下 `w`。由于我一般也就开两个窗口，这也是我用的最多的窗口转换命令。

### 改变窗口大小

如果你的终端支持鼠标的话，直接点击窗口间的分割线，拖动到期望大小即可。我认为在这种情况下用鼠标要比纯键盘方便一些。如果你想通过键盘改变窗口大小的话，可通过 `:h window-resize` 命令查阅完整帮助列表，再次不再赘述。

### 关闭窗口

Ex 命令 | 普通模式命令 | 用途
-- | -- | -- |
:clo[se] | &lt;C-w&gt;c | 关闭当前窗口
:on[ly] | &lt;C-w&gt;o | 关闭当前窗口以外的其他所有窗口

## 标签页

Vim 的标签页和其他许多文本编辑器不同，在 Vim 中，一个标签页下管理者一个到多个不同的窗口（参考 `:h tabpage`）。标签页更像是 Linux 中的虚拟桌面。

### 打开标签页

操作 | 用途
-- | --
`:tabe[dit] <file_name>` | 在新标签页中打开文件
`<C-w>T` | 把当前窗口移到一个标签页

### 在标签页间切换

Ex 命令 | 普通模式命令 | 用途
-- | -- | -- |
`tabn[ext]` | `gt` | 切换到下一标签页
`tabp[revious]` | `gT` | 切换到上一标签页
`tabn[ext] <tab_number>` | `<tab_number>gt` | 切换到编号为 `<tab_number>` 的标签页

### 关闭标签页

操作 | 用途
-- | --
`tabc[lose]` | 关闭当前标签页及其中所有窗口
`tabo[nly]` | 只保留当前标签页，关闭其他所有标签页及其窗口

